## Precision（適合率）と Recall（再現率）の違いをわかりやすく説明！
predicision: positiveと予測したうち、実際にpositiveだった割合
recall: 実際にpositiveだったもののうち、positiveと予測できた割合

機械学習や情報検索では、Precision（適合率） と Recall（再現率） はモデルの性能を評価する重要な指標です。それぞれの意味をシンプルに解説します。

---

### 1. 具体的な例で考えよう
あなたは「スパムメールを判定するAI」を作ったとします。  
AIの役割は、「このメールはスパムかどうか？」を予測することです。  
スパムメール（本当に迷惑メール）を「スパム」と正しく判定できるかが大事になります。

メールを以下の4つのカテゴリーに分類できます：

| 判定  | 実際のメールの種類 | 意味 |
|----------|--------------------|--------|
| True Positive (TP) | スパムなのに、スパムと判定 |  正しく検出！✅ |
| False Positive (FP) | スパムじゃないのに、スパムと判定 |  誤判定（誤検知） ❌ |
| True Negative (TN) | スパムじゃなく、スパムじゃないと判定 | 正しい判定 ✅ |
| False Negative (FN) | スパムなのに、スパムじゃないと判定 | 見逃し ❌ |

---

### 2. Precision（適合率）とは？
「スパムだと判定したメールのうち、本当にスパムだった割合」  
＝ 正しいスパム判定率

計算式：
\[
\text{Precision} = \frac{\text{True Positive (TP)}}{\text{True Positive (TP)} + \text{False Positive (FP)}}
\]

例：
- AIが100通のメールをスパムと判定した
- そのうち80通が本当にスパム（TP）、20通は誤判定（FP）だった

\[
\text{Precision} = \frac{80}{80+20} = 0.8 \quad (80\%)
\]

💡 Precisionが高い = スパムと判定されたメールのほとんどが本当にスパム
- 間違ったスパム判定（FP）が少ない！
- ただし、スパムを見逃している可能性はある（Recallが低い可能性あり）

---

### 3. Recall（再現率）とは？
「本当のスパムのうち、正しくスパムと判定できた割合」  
＝ どれだけスパムを見逃さずに検出できたか

計算式：
\[
\text{Recall} = \frac{\text{True Positive (TP)}}{\text{True Positive (TP)} + \text{False Negative (FN)}}
\]

例：
- 実際には100通のスパムがあった
- AIはそのうち80通をスパムと判定（TP）し、20通を見逃した（FN）

\[
\text{Recall} = \frac{80}{80+20} = 0.8 \quad (80\%)
\]

💡 Recallが高い = ほとんどのスパムを正しく検出できている
- スパムの見逃し（FN）が少ない！
- ただし、誤判定（FP）が多くなる可能性あり（Precisionが低い可能性あり）

---

### 4. PrecisionとRecallのバランス
PrecisionとRecallは トレードオフ の関係にあります。

✅ Precisionを上げる（正しいスパム判定を増やす）  
→ 誤判定（FP）を減らすために、スパム判定の基準を厳しくする（リスクが高いものだけスパムとする）  
❌ 結果: スパムの見逃し（FN）が増え、Recallが低くなる

✅ Recallを上げる（スパムを見逃さないようにする）  
→ できるだけスパムを見逃さないように、判定基準をゆるくする（少しでも怪しいものはスパムとする）  
❌ 結果: 誤判定（FP）が増え、Precisionが低くなる

---

### 5. PrecisionとRecallのバランスを取るには？
#### F1スコア
PrecisionとRecallのバランスを取る指標として、F1スコア がよく使われます。

\[
F1 = 2 \times \frac{\text{Precision} \times \text{Recall}}{\text{Precision} + \text{Recall}}
\]

F1スコアが高いほど、PrecisionとRecallのバランスが良いモデルと言えます。

---

### 6. どちらを優先すべきか？（ユースケース別）
| ユースケース | Precision重視 | Recall重視 |
|---------------|-----------------|-----------------|
| スパムフィルター | ⚖️ バランス型 | ✅ なるべくスパムを見逃さない（Recall重視） |
| 不正取引検出 | ❌ 間違って取引を止めると問題 | ✅ 不正を見逃さないことが最優先 |
| 医療診断（がん検査など） | ❌ 誤診すると患者に悪影響 | ✅ 病気を見逃さないことが重要 |
| 検索エンジン | ✅ 上位に関連性の高い結果を表示 | ❌ 関係のない結果を表示すると不便 |

---

## 7. まとめ
|  | Precision（適合率） | Recall（再現率） |
|---|------------------|----------------|
| 意味 | スパムと判定したうち、正しい割合 | 本当のスパムをどれだけ見つけられたか |
| 計算式 | \( TP / (TP + FP) \) | \( TP / (TP + FN) \) |
| 重視するケース | 関係ないものを含めたくない（誤検知を減らす） | できるだけ多くの対象を見つける（見逃しを防ぐ） |

### PrecisionとRecallはトレードオフなので、目的に応じてどちらを重視するか決めることが大事！
